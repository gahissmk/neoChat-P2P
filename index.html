<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Bienvenue sur NeoChat</title>
<link rel="stylesheet" href="css/style.css">
<link rel="manifest" href="manifest.json">
<script defer src="js/crypto.js"></script>
<script defer src="js/emojis.js"></script>
<script defer src="js/app.js"></script>
<script defer src="js/pwa.js"></script>
</head>
<body>
<div class="app">

  <header class="header">
    <span class="title">Bienvenue sur NeoChat Enfoir√© - Salon : <span id="currentRoom">Salon priv√©</span></span>
    <button onclick="toggleTheme()" class="btn-salon" id="themeToggle">üåô</button>
  </header>

  <div class="main-grid">

    <aside class="sidebar">
      <h2>Utilisateurs en ligne</h2>
      <ul id="onlineUsers"></ul>
      <h2>Salons priv√©s</h2>
      <ul id="roomList"></ul>
      <button onclick="createPrivateRoom()" class="btn-salon">‚ûï Nouveau salon</button>
    </aside>

    <main class="chat">
      <div class="messages" id="messages"></div>
      <form id="chatForm">
        <input id="messageInput" placeholder="Message chiffr√© E2E‚Ä¶">
        <input type="file" id="imageInput" accept="image/*">
        <button>‚û§</button>
      </form>
      <div id="emojiPicker"></div>
    </main>

  </div>
</div>

<script>
function toggleTheme(){
  document.body.classList.toggle("light-theme");
}

function createPrivateRoom(){
  let name = prompt("Nom du salon priv√© :");
  if(!name) return;
  let allowedUsers = prompt("Liste des utilisateurs autoris√©s (pseudo s√©par√©s par ,) :");
  if(!allowedUsers) return;
  let rooms = JSON.parse(localStorage.getItem("neo_private_rooms")||"{}");
  rooms[name] = allowedUsers.split(",").map(u=>u.trim());
  localStorage.setItem("neo_private_rooms", JSON.stringify(rooms));
  alert("Salon priv√© cr√©√© !");
  location.reload();
}
</script>

</body>
</html>
